<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Welcome here!</title>
    <link rel="preconnect" href="https://v1.hitokoto.cn" crossorigin>
    <script>
        (() => {
            try {
                const mem = navigator.deviceMemory || 0;
                const cores = navigator.hardwareConcurrency || 0;
                if ((mem && mem <= 4) || (cores && cores <= 4)) {
                    document.documentElement.classList.add('lowperf');
                }
            } catch { }
        })();
    </script>
    <style>
        :root {
            --bg: #fbfcfd;
            --ink: #475569;
            /* --mint: #d8f5df;
                --apricot: #fff3cd;
                --lavender: #ece8ff; */
            --mint: #8ff5a2;
            /* 更亮的绿色 */
            --apricot: #ffd580;
            /* 更深的杏色 */
            --lavender: #d0b8ff;
            /* 更饱和的紫色 */

            --drift-duration: 22s;
            --blob-size: 52vmax;
            --blob-blur: 48px;
            --blob-opacity: 0.4;
            --blob-opacity-low: 0.18;
        }

        * {
            box-sizing: border-box;
        }

        html,
        body {
            height: 100%;
            margin: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans CJK SC", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
            background: var(--bg);
            color: var(--ink);
            display: grid;
            place-items: center;
            line-height: 1.6;
        }

        /* 背景渐变动画 */
        .bg {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 0;
        }

        .bg::before {
            content: "";
            position: absolute;
            inset: 0;
            background:
                radial-gradient(var(--blob-size) var(--blob-size) at 15% 20%, var(--mint) 0%, transparent 55%),
                radial-gradient(var(--blob-size) var(--blob-size) at 85% 80%, var(--apricot) 0%, transparent 55%),
                radial-gradient(calc(var(--blob-size) - 6vmax) calc(var(--blob-size) - 6vmax) at 80% 15%, var(--lavender) 0%, transparent 55%),
                rgba(255, 255, 255, 0.05);
            /* 这里是叠加层 */
            background-repeat: no-repeat;
            animation: driftBg var(--drift-duration) ease-in-out infinite;
            opacity: var(--blob-opacity);
            will-change: background-position;
        }

        @keyframes driftBg {

            0%,
            100% {
                background-position: 0px 0px, 0px 0px, 0px 0px;
            }

            50% {
                background-position: 1.2vmax -0.6vmax, -1vmax 0.8vmax, 0.8vmax -0.5vmax;
            }
        }

        .center {
            position: fixed;
            inset: 0;
            display: grid;
            place-items: center;
            z-index: 1;
            text-align: center;
        }

        .title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .hitokoto {
            position: fixed;
            inset: auto 0 28px 0;
            width: min(92%, 720px);
            margin: 0 auto;
            color: var(--ink);
            text-align: center;
            font-size: 14px;
            line-height: 1.7;
            padding: 10px 14px;
            border-radius: 12px;
            background: rgba(255, 255, 255, .45);
            border: 1px solid rgba(148, 163, 184, .22);
            backdrop-filter: blur(5px) saturate(108%);
            -webkit-backdrop-filter: blur(5px) saturate(108%);
            visibility: hidden;
            opacity: 0;
            transform: translateY(6px);
            transition: opacity .5s ease, transform .5s ease, box-shadow .25s ease, visibility 0s linear .5s;
            box-shadow: 0 4px 16px rgba(15, 23, 42, .05);
        }

        .hitokoto.show {
            visibility: visible;
            opacity: .92;
            transform: translateY(0);
            transition-delay: 0s;
        }

        /* 降低动画/性能要求 */
        @media (prefers-reduced-motion: reduce) {
            .bg::before {
                animation: none !important;
            }

            .hitokoto {
                transition: none !important;
            }
        }

        html.lowperf .bg::before {
            animation: none !important;
            opacity: var(--blob-opacity-low) !important;
            background: radial-gradient(circle at 30% 30%, var(--mint), transparent 60%),
                radial-gradient(circle at 70% 70%, var(--apricot), transparent 60%),
                radial-gradient(circle at 80% 20%, var(--lavender), transparent 60%);
            background-size: cover;
        }

        html.lowperf .hitokoto {
            backdrop-filter: none !important;
            -webkit-backdrop-filter: none !important;
            background: rgba(255, 255, 255, .82) !important;
        }

        /* 移动端尺寸调整 */
        @media (max-width: 480px) {
            :root {
                --blob-size: 46vmax;
                --blob-blur: 36px;
            }

            .hitokoto {
                font-size: 13px;
                inset: auto 0 22px 0;
            }
        }
    </style>
</head>

<body>
    <div class="bg" aria-hidden="true"></div>
    <div class="center">
        <div class="title">Welcome here!</div>
    </div>
    <div class="hitokoto" id="hitokoto"></div>

    <script>
        (() => {
            const API_URL = 'https://v1.hitokoto.cn/?c=i&c=d&c=k';
            const FETCH_TIMEOUT = 2500;
            const root = document.documentElement;
            const elHitokoto = document.getElementById('hitokoto');

            // 更新暂停状态
            const updatePaused = () => {
                root.classList.toggle('paused', document.hidden || !document.hasFocus());
            };
            ['visibilitychange', 'focus', 'blur'].forEach(evt =>
                addEventListener(evt, updatePaused)
            );
            updatePaused();

            // fetch 带超时
            const fetchWithTimeout = (url, opts = {}) => {
                const controller = new AbortController();
                const timer = setTimeout(() => controller.abort(), FETCH_TIMEOUT);
                return fetch(url, { signal: controller.signal, cache: 'no-store', ...opts })
                    .finally(() => clearTimeout(timer));
            };

            // 加载一言
            const loadHitokoto = async () => {
                try {
                    const resp = await fetchWithTimeout(API_URL);
                    if (!resp.ok) throw new Error('network');
                    const { hitokoto = '', from = '' } = await resp.json();
                    elHitokoto.textContent = `${hitokoto}${from ? ` — ${from}` : ''}`;
                    requestAnimationFrame(() => elHitokoto.classList.add('show'));
                } catch (err) {
                    console.error(err);
                }
            };

            addEventListener('DOMContentLoaded', loadHitokoto);
        })();
    </script>
</body>

</html>